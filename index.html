<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tibia Client Options Editor</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="title">
                <span class="tibia-icon">‚öîÔ∏è</span>
                Tibia Configuration Editor
            </h1>
            <p class="subtitle">Editor de configura√ß√µes do cliente Tibia</p>
        </header>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <button class="tab-button active" data-tab="client-configurator">
                Client Configurator
            </button>
            <button class="tab-button" data-tab="price-fixer">
                Price Fixer
            </button>
            <button class="tab-button" data-tab="zerobot-manager">
                ZeroBot Manager
            </button>
        </nav>

        <main class="main-content">
            <!-- Client Configurator Tab -->
            <div class="tab-content active" id="client-configurator">
                <div class="info-box">
                    <p class="info-text">
                        üìÅ Para obter o arquivo, busque na pasta: <strong>{Pasta Tibia}/conf/clientoptions.json</strong>
                    </p>
                </div>
            <!-- Upload Section -->
            <section class="upload-section">
                <h2 class="section-title">Upload de Arquivos</h2>
                <div class="upload-container">
                    <div class="upload-box" id="uploadBox1" data-file-index="0">
                        <div class="upload-area" id="uploadArea1">
                            <div class="upload-icon">üìÑ</div>
                            <p class="upload-text">Arquivo 1</p>
                            <p class="upload-hint">Clique ou arraste o JSON aqui</p>
                            <input type="file" id="fileInput1" accept=".json" class="file-input">
                        </div>
                        <div class="file-info" id="fileInfo1" style="display: none;">
                            <span class="file-name" id="fileName1"></span>
                            <button class="btn-remove" id="removeFile1">‚úï</button>
                        </div>
                    </div>

                    <div class="upload-box" id="uploadBox2" data-file-index="1">
                        <div class="upload-area" id="uploadArea2">
                            <div class="upload-icon">üìÑ</div>
                            <p class="upload-text">Arquivo 2 (Opcional)</p>
                            <p class="upload-hint">Clique ou arraste o JSON aqui</p>
                            <input type="file" id="fileInput2" accept=".json" class="file-input">
                        </div>
                        <div class="file-info" id="fileInfo2" style="display: none;">
                            <span class="file-name" id="fileName2"></span>
                            <button class="btn-remove" id="removeFile2">‚úï</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Editor Sections -->
            <div class="editor-container" id="editorContainer" style="display: none;">
                <!-- Single File Editor -->
                <div class="single-file-editor" id="singleFileEditor">
                    <section class="editor-section">
                        <h2 class="section-title">Hotkeys e Actions Bars</h2>
                        <div class="hotkey-controls">
                            <div class="profile-list" id="profileList"></div>
                            <div class="profile-actions">
                                <button class="btn btn-secondary" id="btnCopyProfile">üìã Copiar Perfil</button>
                            </div>
                        </div>
                    </section>

                    <section class="editor-section">
                        <h2 class="section-title">Configura√ß√µes de Chat</h2>
                        <div class="chat-settings">
                            <label class="checkbox-label">
                                <input type="checkbox" id="chatEnabled" class="checkbox-input">
                                <span class="checkbox-text">Chat Habilitado</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="npcMessagesEnabled" class="checkbox-input">
                                <span class="checkbox-text">Mensagens de NPC Habilitadas</span>
                            </label>
                        </div>
                    </section>

                    <section class="editor-section">
                        <h2 class="section-title">Configura√ß√µes de Action Bars</h2>
                        <div class="action-bar-settings">
                            <label class="checkbox-label">
                                <input type="checkbox" id="lockActionBars" class="checkbox-input">
                                <span class="checkbox-text">Bloquear Action Bars (desabilitar drag & drop)</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="showActionBar1" class="checkbox-input">
                                <span class="checkbox-text">Mostrar Action Bar 1</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="showActionBar2" class="checkbox-input">
                                <span class="checkbox-text">Mostrar Action Bar 2</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="showAmount" class="checkbox-input">
                                <span class="checkbox-text">Mostrar Quantidade de Itens</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="showCooldown" class="checkbox-input">
                                <span class="checkbox-text">Mostrar Anima√ß√£o de Cooldown</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="showCooldownNumber" class="checkbox-input">
                                <span class="checkbox-text">Mostrar Contador de Cooldown</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="showHotkey" class="checkbox-input">
                                <span class="checkbox-text">Mostrar Hotkey nos Bot√µes</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="showSpellParameters" class="checkbox-input">
                                <span class="checkbox-text">Mostrar Par√¢metros de Magia</span>
                            </label>
                        </div>
                    </section>

                    <section class="editor-section">
                        <h2 class="section-title">Configura√ß√µes Gerais</h2>
                        <div class="general-settings">
                            <label class="checkbox-label">
                                <input type="checkbox" id="animatedMouseCursor" class="checkbox-input">
                                <span class="checkbox-text">Cursor Animado ao Passar sobre Tiles</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="askBeforeBuyingStoreProducts" class="checkbox-input">
                                <span class="checkbox-text">Perguntar Antes de Comprar na Store</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="highlightMouseTarget" class="checkbox-input">
                                <span class="checkbox-text">Destacar Tile ao Passar o Mouse</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="showCooldownBar" class="checkbox-input">
                                <span class="checkbox-text">Mostrar Barra de Cooldown</span>
                            </label>
                            <div class="select-setting">
                                <label class="form-label">
                                    Esquema de Controle:
                                    <select id="controlScheme" class="form-select">
                                        <option value="0">Classic Controls</option>
                                        <option value="1">Regular Controls</option>
                                        <option value="2">Left Smart-Click Controls</option>
                                    </select>
                                </label>
                            </div>
                        </div>
                    </section>

                    <section class="editor-section">
                        <h2 class="section-title">Canais Abertos</h2>
                        <div class="channels-container" id="channelsContainer"></div>
                    </section>

                    <div class="action-buttons">
                        <button class="btn btn-success" id="btnDownload">üíæ Download JSON</button>
                        <button class="btn btn-danger" id="btnReset">üîÑ Resetar</button>
                    </div>
                </div>

                <!-- Dual File Editor -->
                <div class="dual-file-editor" id="dualFileEditor" style="display: none;">
                    <div class="dual-editor-grid">
                        <div class="file-panel" id="filePanel1">
                            <h3 class="panel-title">Arquivo 1</h3>
                            <div class="profiles-section">
                                <h4 class="profiles-subtitle">Perfis (Arraste para Arquivo 2)</h4>
                                <div class="profile-list-dual" id="profileList1"></div>
                            </div>
                            <div class="channels-section-dual">
                                <h4 class="profiles-subtitle">Canais</h4>
                                <div class="drag-drop-zone" id="dragZone1Channels" data-source="0" data-target="1" data-type="channels">
                                    <div class="drag-icon">‚¨áÔ∏è</div>
                                    <p>Arraste para Arquivo 2</p>
                                    <p class="drag-label">Copiar OpenChannels</p>
                                </div>
                            </div>
                            <button class="btn btn-success btn-block" id="btnDownload1">üíæ Download Arquivo 1</button>
                        </div>

                        <div class="file-panel" id="filePanel2">
                            <h3 class="panel-title">Arquivo 2</h3>
                            <div class="profiles-section">
                                <h4 class="profiles-subtitle">Perfis (Arraste para Arquivo 1)</h4>
                                <div class="profile-list-dual" id="profileList2"></div>
                            </div>
                            <div class="channels-section-dual">
                                <h4 class="profiles-subtitle">Canais</h4>
                                <div class="drag-drop-zone" id="dragZone2Channels" data-source="1" data-target="0" data-type="channels">
                                    <div class="drag-icon">‚¨áÔ∏è</div>
                                    <p>Arraste para Arquivo 1</p>
                                    <p class="drag-label">Copiar OpenChannels</p>
                                </div>
                            </div>
                            <button class="btn btn-success btn-block" id="btnDownload2">üíæ Download Arquivo 2</button>
                        </div>
                    </div>
                </div>
            </div>
            </div>

            <!-- Price Fixer Tab -->
            <div class="tab-content" id="price-fixer">
                <div class="char-configurator-container">
                    <!-- Instructions Section -->
                    <section class="instructions-section">
                        <h2 class="section-title">üìñ Instru√ß√µes</h2>
                        <div class="instructions-content">
                            <div class="instruction-step">
                                <p><strong>Infelizmente cada personagem no t√≠bia possui sua pr√≥pria lista de pre√ßos, para isso, precisaremos seguir alguns passos:</strong></p>
                                <h3 class="step-title">Step 1: Escolher o arquivo a Editado</h3>
                                <ol class="step-list">
                                    <li>No cliente do Tibia, no personagem escolhido, v√° em <strong>Cyclopedia ‚Üí Items</strong> e configure um pre√ßo customizado em qualquer item. Isso garante que o arquivo <code>itemsprices.json</code> associado a este personagem seja o mais recentemente atualizado.</li>
                                    <li>Abra o diret√≥rio de screenshots do Tibia. Voc√™ pode fazer isso pelo cliente do Tibia via <strong>Settings ‚Üí Misc. ‚Üí Screenshots ‚Üí Open Screenshot Folder</strong>.</li>
                                    <li>Suba um n√≠vel de diret√≥rio e entre no diret√≥rio <code>characterdata</code> (no mesmo n√≠vel dos diret√≥rios screenshots e minimap).</li>
                                    <li>Encontre o diret√≥rio mais recentemente atualizado (ex: no Windows Explorer, voc√™ pode ordenar por "Date modified" em ordem decrescente) e entre nele.</li>
                                    <li>O arquivo <code>itemsprices.json</code> nesta pasta √© o que voc√™ quer!</li>
                                    <li>Feche o cliente do Tibia.</li>
                                    <li>Renomeie o arquivo como <code>itemsprices.json.BKP</code></li>
                                    <li>Fa√ßa o upload do arquivo na pr√≥xima tela</li>
                                </ol>
                            </div>
                        </div>
                    </section>

                    <!-- Upload Section -->
                    <section class="char-upload-section">
                        <h2 class="section-title">Step 2: Upload seu arquivo atual</h2>
                        <div class="char-upload-container">
                            <div class="char-upload-box">
                                <div class="upload-area" id="charUploadArea">
                                    <div class="upload-icon">üìÑ</div>
                                    <p class="upload-text">itemprices.json</p>
                                    <p class="upload-hint">Clique ou arraste o JSON aqui</p>
                                    <input type="file" id="charFileInput" accept=".json" class="file-input">
                                </div>
                                <div class="file-info" id="charFileInfo" style="display: none;">
                                    <span class="file-name" id="charFileName"></span>
                                    <button class="btn-remove" id="removeCharFile">‚úï</button>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Download Section -->
                    <section class="char-download-section" id="charDownloadSection" style="display: none;">
                        <h2 class="section-title">Step 3: Download do arquivo atualizado</h2>
                        <div class="char-download-container">
                            <p class="download-info"><strong>Seu arquivo foi processado e mesclado com os pre√ßos customizados!</strong></p>
                            <ol class="step-list">
                                <li>Fa√ßa o download e salve na mesma pasta que esta o arquivo de backup anterior com o nome <code>itemsprice.json</code></li>
                            </ol>
                            <button class="btn btn-success btn-large" id="btnDownloadChar">
                                üíæ Download itemprices.json Atualizado
                            </button>
                        </div>
                    </section>
                </div>
            </div>

            <!-- ZeroBot Manager Tab -->
            <div class="tab-content" id="zerobot-manager">
                <div class="zerobot-container">
                    <div class="info-box">
                        <p class="info-text">
                            üìÅ Fa√ßa upload de at√© 2 arquivos <code>char.json</code> do ZeroBot para gerenciar e organizar suas configura√ß√µes.
                        </p>
                    </div>

                    <!-- Upload Section -->
                    <section class="upload-section">
                        <h2 class="section-title">Upload de Arquivos</h2>
                        <div class="upload-container">
                            <div class="upload-box" id="zerobotUploadBox1" data-file-index="0">
                                <div class="upload-area" id="zerobotUploadArea1">
                                    <div class="upload-icon">üìÑ</div>
                                    <p class="upload-text">Arquivo 1</p>
                                    <p class="upload-hint">Clique ou arraste o JSON aqui</p>
                                    <input type="file" id="zerobotFileInput1" accept=".json" class="file-input">
                                </div>
                                <div class="file-info" id="zerobotFileInfo1" style="display: none;">
                                    <span class="file-name" id="zerobotFileName1"></span>
                                    <button class="btn-remove" id="removeZerobotFile1">‚úï</button>
                                </div>
                            </div>

                            <div class="upload-box" id="zerobotUploadBox2" data-file-index="1">
                                <div class="upload-area" id="zerobotUploadArea2">
                                    <div class="upload-icon">üìÑ</div>
                                    <p class="upload-text">Arquivo 2 (Opcional)</p>
                                    <p class="upload-hint">Clique ou arraste o JSON aqui</p>
                                    <input type="file" id="zerobotFileInput2" accept=".json" class="file-input">
                                </div>
                                <div class="file-info" id="zerobotFileInfo2" style="display: none;">
                                    <span class="file-name" id="zerobotFileName2"></span>
                                    <button class="btn-remove" id="removeZerobotFile2">‚úï</button>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Editor Sections -->
                    <div class="zerobot-editor-container" id="zerobotEditorContainer" style="display: none;">
                        <!-- Single File Editor -->
                        <div class="zerobot-single-editor" id="zerobotSingleEditor">
                            <section class="editor-section">
                                <h2 class="section-title">Enabled Scripts</h2>
                                <div class="zerobot-scripts-container">
                                    <p class="info-text">Organize os scripts habilitados em ordem alfab√©tica</p>
                                    <div class="script-list" id="enabledScriptsList"></div>
                                    <button class="btn btn-secondary" id="btnSortScripts">üî§ Ordenar Alfabeticamente</button>
                                </div>
                            </section>

                            <section class="editor-section">
                                <h2 class="section-title">Targetting Profiles</h2>
                                <div class="zerobot-profiles-container">
                                    <p class="info-text">Os profiles s√£o sincronizados: list, profileKeys, profileModifiers e profileNames trabalham juntos</p>
                                    <div class="profile-list" id="targettingProfilesList"></div>
                                </div>
                            </section>

                            <section class="editor-section">
                                <h2 class="section-title">Magic Shooter Profiles</h2>
                                <div class="zerobot-profiles-container">
                                    <div class="profile-list" id="magicShooterProfilesList"></div>
                                </div>
                            </section>

                            <section class="editor-section">
                                <h2 class="section-title">Equipment Profiles</h2>
                                <div class="zerobot-profiles-container">
                                    <div class="profile-list" id="equipmentProfilesList"></div>
                                </div>
                            </section>

                            <section class="editor-section">
                                <h2 class="section-title">Healing Profiles</h2>
                                <div class="zerobot-profiles-container">
                                    <div class="profile-list" id="healingProfilesList"></div>
                                </div>
                            </section>

                            <div class="action-buttons">
                                <button class="btn btn-success" id="btnDownloadZerobot">üíæ Download JSON</button>
                                <button class="btn btn-danger" id="btnResetZerobot">üîÑ Resetar</button>
                            </div>
                        </div>

                        <!-- Dual File Editor -->
                        <div class="zerobot-dual-editor" id="zerobotDualEditor" style="display: none;">
                            <div class="dual-editor-grid">
                                <div class="file-panel" id="zerobotFilePanel1">
                                    <h3 class="panel-title">Arquivo 1</h3>
                                    <div class="zerobot-sections-container">
                                        <div class="zerobot-section">
                                            <h4 class="section-subtitle">Enabled Scripts</h4>
                                            <div class="drag-drop-zone" id="dragZone1Scripts" data-source="0" data-target="1" data-type="scripts">
                                                <div class="drag-icon">‚¨áÔ∏è</div>
                                                <p>Arraste para Arquivo 2</p>
                                                <p class="drag-label">Copiar Enabled Scripts</p>
                                            </div>
                                        </div>
                                        <div class="zerobot-section">
                                            <h4 class="section-subtitle">Targetting Profiles</h4>
                                            <div class="profile-list-dual" id="zerobotTargettingList1"></div>
                                        </div>
                                        <div class="zerobot-section">
                                            <h4 class="section-subtitle">Magic Shooter Profiles</h4>
                                            <div class="profile-list-dual" id="zerobotMagicShooterList1"></div>
                                        </div>
                                        <div class="zerobot-section">
                                            <h4 class="section-subtitle">Equipment Profiles</h4>
                                            <div class="profile-list-dual" id="zerobotEquipmentList1"></div>
                                        </div>
                                        <div class="zerobot-section">
                                            <h4 class="section-subtitle">Healing Profiles</h4>
                                            <div class="profile-list-dual" id="zerobotHealingList1"></div>
                                        </div>
                                    </div>
                                    <button class="btn btn-success btn-block" id="btnDownloadZerobot1">üíæ Download Arquivo 1</button>
                                </div>

                                <div class="file-panel" id="zerobotFilePanel2">
                                    <h3 class="panel-title">Arquivo 2</h3>
                                    <div class="zerobot-sections-container">
                                        <div class="zerobot-section">
                                            <h4 class="section-subtitle">Enabled Scripts</h4>
                                            <div class="drag-drop-zone" id="dragZone2Scripts" data-source="1" data-target="0" data-type="scripts">
                                                <div class="drag-icon">‚¨áÔ∏è</div>
                                                <p>Arraste para Arquivo 1</p>
                                                <p class="drag-label">Copiar Enabled Scripts</p>
                                            </div>
                                        </div>
                                        <div class="zerobot-section">
                                            <h4 class="section-subtitle">Targetting Profiles</h4>
                                            <div class="profile-list-dual" id="zerobotTargettingList2" data-file-index="1" data-section="targeting"></div>
                                        </div>
                                        <div class="zerobot-section">
                                            <h4 class="section-subtitle">Magic Shooter Profiles</h4>
                                            <div class="profile-list-dual" id="zerobotMagicShooterList2" data-file-index="1" data-section="magicShooter"></div>
                                        </div>
                                        <div class="zerobot-section">
                                            <h4 class="section-subtitle">Equipment Profiles</h4>
                                            <div class="profile-list-dual" id="zerobotEquipmentList2" data-file-index="1" data-section="equipment"></div>
                                        </div>
                                        <div class="zerobot-section">
                                            <h4 class="section-subtitle">Healing Profiles</h4>
                                            <div class="profile-list-dual" id="zerobotHealingList2" data-file-index="1" data-section="healing"></div>
                                        </div>
                                    </div>
                                    <button class="btn btn-success btn-block" id="btnDownloadZerobot2">üíæ Download Arquivo 2</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal para lista de monstros do ZeroBot -->
    <div class="modal" id="zerobotMonstersModal">
        <div class="modal-content modal-large">
            <span class="modal-close" id="zerobotMonstersModalClose">&times;</span>
            <h3 class="modal-title" id="zerobotMonstersModalTitle">Lista de Monstros</h3>
            <div class="modal-body">
                <div class="monsters-list-container" id="zerobotMonstersListContainer">
                    <ul class="monsters-list-full" id="zerobotMonstersList"></ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para atribuir valores a todos os monstros -->
    <div class="modal" id="zerobotAssignValuesModal">
        <div class="modal-content modal-medium">
            <span class="modal-close" id="zerobotAssignValuesModalClose">&times;</span>
            <h3 class="modal-title" id="zerobotAssignValuesModalTitle">Atribuir a todos os monstros deste perfil</h3>
            <div class="modal-body">
                <div class="assign-values-container">
                    <div class="assign-value-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="assignChaseMode" class="checkbox-input">
                            <span class="checkbox-text">ChaseMode</span>
                        </label>
                        <input type="number" id="chaseModeValue" class="form-input" value="4" min="0" max="4" disabled>
                    </div>
                    <div class="assign-value-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="assignCount" class="checkbox-input">
                            <span class="checkbox-text">Count</span>
                        </label>
                        <input type="number" id="countValue" class="form-input" value="1" min="0" disabled>
                    </div>
                    <div class="assign-value-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="assignDistance" class="checkbox-input">
                            <span class="checkbox-text">Distance</span>
                        </label>
                        <input type="number" id="distanceValue" class="form-input" value="0" min="0" disabled>
                    </div>
                    <div class="assign-value-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="assignEnabled" class="checkbox-input">
                            <span class="checkbox-text">Enabled</span>
                        </label>
                        <input type="checkbox" id="enabledValue" class="checkbox-input" checked disabled>
                    </div>
                    <div class="assign-value-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="assignMaxHP" class="checkbox-input">
                            <span class="checkbox-text">MaxHP</span>
                        </label>
                        <input type="number" id="maxHPValue" class="form-input" value="100" min="0" max="100" disabled>
                    </div>
                    <div class="assign-value-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="assignMinHP" class="checkbox-input">
                            <span class="checkbox-text">MinHP</span>
                        </label>
                        <input type="number" id="minHPValue" class="form-input" value="0" min="0" max="100" disabled>
                    </div>
                    <div class="assign-value-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="assignPriority" class="checkbox-input">
                            <span class="checkbox-text">Priority</span>
                        </label>
                        <input type="number" id="priorityValue" class="form-input" value="0" min="0" disabled>
                    </div>
                    <div class="assign-value-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="assignProximity" class="checkbox-input">
                            <span class="checkbox-text">Proximity</span>
                        </label>
                        <input type="number" id="proximityValue" class="form-input" value="6" min="0" disabled>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-primary" id="btnConfirmAssignValues">Confirmar</button>
                <button class="btn btn-secondary" id="btnCancelAssignValues">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal para criar/copiar perfil -->
    <div class="modal" id="profileModal">
        <div class="modal-content">
            <span class="modal-close" id="modalClose">&times;</span>
            <h3 class="modal-title" id="modalTitle">Copiar Perfil</h3>
            <div class="modal-body">
                <label class="form-label">
                    Nome do Perfil:
                    <input type="text" id="profileNameInput" class="form-input" placeholder="Digite o nome do perfil">
                </label>
                <div id="copyProfileSelect" style="display: none;">
                    <label class="form-label">
                        Copiar de:
                        <select id="copyFromSelect" class="form-select"></select>
                    </label>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-primary" id="btnConfirmProfile">Confirmar</button>
                <button class="btn btn-secondary" id="btnCancelProfile">Cancelar</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="zerobot-manager.js"></script>
</body>
</html>
